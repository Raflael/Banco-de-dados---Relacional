CREATE TABLE "Usuario" (
  "id_usuario" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nome" varchar,
  "email" varchar UNIQUE,
  "telefone" varchar,
  "data_cadastro" datetime
);

CREATE TABLE "Localizacao" (
  "id_local" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "latitude" decimal(9,6),
  "longitude" decimal(9,6),
  "municipio" varchar,
  "uf" char(2)
);

CREATE TABLE "EventoCritico" (
  "id_evento" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "tipo" varchar,
  "severidade" varchar,
  "data_hora" datetime,
  "status" varchar,
  "fonte" varchar,
  "descricao" text,
  "id_usuario_reporter" int,
  "id_local" int
);

CREATE TABLE "Assinatura" (
  "id_assinatura" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "canais" varchar,
  "criado_em" datetime,
  "id_usuario" int,
  "id_local" int
);

ALTER TABLE "EventoCritico" ADD FOREIGN KEY ("id_usuario_reporter") REFERENCES "Usuario" ("id_usuario");

ALTER TABLE "EventoCritico" ADD FOREIGN KEY ("id_local") REFERENCES "Localizacao" ("id_local");

ALTER TABLE "Assinatura" ADD FOREIGN KEY ("id_usuario") REFERENCES "Usuario" ("id_usuario");

ALTER TABLE "Assinatura" ADD FOREIGN KEY ("id_local") REFERENCES "Localizacao" ("id_local");
